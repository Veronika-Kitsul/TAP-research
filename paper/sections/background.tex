\section{Background}
\label{sec:background}

\subsection{Trigger-Action Systems}

Trigger-action systems have three main components: trigger service (TS), action service (AS), and
trigger-action platform (TAP). Users interact with it through their computer connected to the cloud or
smartphone **(that can be offline? need to see how ifttt does it)**~\cite{DBLP:conf/sp/ChenCWSCF21}.

(ifttt website and ~\cite{DBLP:conf/spChenCWSCF21}. Clients configure the system by specifying triggers ("if my Fitbit sends a sleep data")
and actions ("create a Google Calendar reminder to sleep more"). 

\subsection{Market Analysis}
Today's market of trigger-action platforms is fairly extensive and includes many alternatives to IFTTT.
There is only one comparative study of such applications that looks at IFTTT, Zapier, Integromat,
Microsoft Power Automate, and Parabola (there is another study that compares only IFTTT and Zapier)
~\cite{DBLP:conf/icict2/AbdouEF21}. However, there are way more many TAPs than that. Others include
Automate.io, Zoho Flow, Tasker, Workflow, Huginn, Elastic.io,
Workato, Actiondesk, Scriptable. 

Platforms' capabilities also depend on the pricing plan the user is at. For example, Zapier gives an
opportunity to make 100,000 tasks per month with unlimited multi-step applets and updates services
each minute in a Company plan. Conversely, free plan gives only 5 single-step applets with 100 tasks
per month and update time of 15 minutes. 

Zapier, IFTTT, and Integromate all integrate messages, calls, GPS, Wi-Fi, photos, and contacts. Abdou
et al. writes that "they can send and save SMS messages, check the incoming class and give more
information about the caller, save the numbers you call, automate actions based on phone location,
record motion of the phone, track locations, get notifications when employees connect or disconnect to
the Wi-Fi, turn off Wi-Fi automatically, backup photos, send/upload contacts from/to your phone"
~\cite{DBLP:conf/icict2/AbdouEF21}. Zapier also integrates with 2000+ appications as major technology
companies are interested in partnering with it. 
% why????

All platforms, however, have one thing in common---security vulnerability. By attacking only one digital
automation platform, hackers may extract information from all integrated applications and devices that
may expose users to physical or verbal threats. Sometimes, mistake on users behalf may lead to
unexpected behaviour that would leak sensitive information. Therefore, this paper is trying to minimize
the amount of data TAP has an access to so that when its security is compromised, attackers can gain as
little data as possible.


\subsection{Cryptography Behind the Design}

\subsubsection{Multi-Party Computation}

Secure multi-party computation (MPC) enables a computation within a group of devices without revealing
any participant's private information. MPC allows verifiable computation, meaning the participants then
may confirm the result of the function they agreed on computing. Since its invention by Andrew Yao in
1982, the topic has attracted many researchers and evolved from theory to an important practical tool for
all kinds of applications ~\cite{DBLP:journals/ftsec/EvansKR18}. 

None of the parties trusts each other nor do they trust any third party. We use the two-party scenario (also called 2PC) and set it up between user---TAP and TAP---action-platform. MPC assumes direct secure channels between each pair and denotes encryption and decryption of a message $m$ under key $\kappa$ as $\mathsf{Enc}_\kappa(m)$ and $\mathsf{Dec}_\kappa(m)$ with the goal to learn the correct output of a mutual function without revealing private inputs. 

Our MPC will also use Semi-Honest adversary model. Semi-Honest model corrupts parties but follows
the protocol. However, the corrupt parties may try to learn as much as possible from the messages they receive. They cannot take any actions other than observe protocol execution, so they are also called \emph{honest-but-curious}. 

Under semi-honest adversaries, a protocol $\pi$ securely executes $\phi$ if there exists a simulator $\mathsf{Sim}$ such that for every subset of corrupt parties $C$ and all inputs $x_1, ..., x_n$ the distributions under real-ideal paradigm 
\begin{gather*}
  \mathsf{Real}_{\pi}(\kappa, C, x_1, ..., x_n) \\
  \mathsf{Ideal}_{\phi, \mathsf{Sim}} (\kappa, C, x_1, ..., x_n)
\end{gather*} 

are indistinguishable in $\kappa$.




\subsubsection{Garbled Circuits}

The first Garbled Circuits Protocol was introduced by Yao a few years after his first publication on MPC. It remains the basis for some of the most efficient MPC implementations. Yao's Garbled Circuits operate on the idea that there is a function $F(x,y)$, party $P_1$ holds $x \in X$, and party $P_2$ holds $y \in Y$.








